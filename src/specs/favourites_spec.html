<html>
  <head>
    <script src="../vendor/screw-unit/lib/jquery-1.3.2.js"></script>
    <script src="../vendor/screw-unit/lib/jquery.fn.js"></script>
    <script src="../vendor/screw-unit/lib/jquery.print.js"></script>
    <script src="../vendor/screw-unit/lib/screw.builder.js"></script>
    <script src="../vendor/screw-unit/lib/screw.matchers.js"></script>
    <script src="../vendor/screw-unit/lib/screw.events.js"></script>
    <script src="../vendor/screw-unit/lib/screw.behaviors.js"></script>
    <script src="../js/dinosaur.js"></script>
    <script src="../js/favourites.js"></script>
    <link rel="stylesheet" href="../vendor/screw-unit/lib/screw.css">
    
    <script type="text/javascript">
      
	  Screw.Unit(function() {
        describe("Favourites", function() {
	
		  before(function() {
 		    $('#fixtures').append($('<div id="favourites"><h3></h3></div>'));
			favourites = new Favourites($("#favourites"));
		  });
		
		  describe("by default", function() {

	        it("has no dinosaurs", function() {
	          expect(favourites.getNumberOfDinosaurs()).to(equal, 0);
	        });
			
	   	  });
		
		  describe("adding an item to the favourites", function() {
			
			before(function() {
			  favourites.addDinosaur(new Dinosaur());
			});
			
			it('increments the number of dinosaurs', function() {
			  expect(favourites.getNumberOfDinosaurs()).to(equal, 1);
			});
			
		  });

		  describe("with multiple dinosaurs", function() {
			before(function() {
			  var dinosaur = { getName: function() { return "Apatosaurus" } }
			  favourites.addDinosaur(dinosaur);
			  favourites.addDinosaur(new Dinosaur());
			})
			
			it("can get a list of the dinosaurs", function() {
			  expect(favourites.getDinosaurs()[0].getName()).to(equal, "Apatosaurus");	
			});
			
		  });
		
		  describe("rendering the list of dinosaurs", function() {
			before(function() {
			  favourites.addDinosaur({ getName: function() { return "Apatosaurus" } });
			  favourites.refresh();
			});
			
			it("shows the dinosaur as a bulleted list item", function() {
			  expect($("#favourites > h3 > ul > li").html()).to(equal, "Apatosaurus");	
			});
			
		  })
        });
        
		after(function() {
			$("#favourites").remove();
		});

      });

    </script>
  </head>
  <body>
	<div id="fixtures"/>
  </body>
</html>